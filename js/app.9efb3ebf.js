(function(t){function e(e){for(var n,i,o=e[0],c=e[1],l=e[2],d=0,p=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(p.length)p.shift()();return r.push.apply(r,l||[]),s()}function s(){for(var t,e=0;e<r.length;e++){for(var s=r[e],n=!0,o=1;o<s.length;o++){var c=s[o];0!==a[c]&&(n=!1)}n&&(r.splice(e--,1),t=i(i.s=s[0]))}return t}var n={},a={app:0},r=[];function i(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=n,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/vue-messenger/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;r.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"07a7":function(t,e,s){},"16a3":function(t,e,s){"use strict";s("cd8c")},"16b0":function(t,e,s){},"230c":function(t,e,s){},"44b9":function(t,e,s){"use strict";s("cb20")},5338:function(t,e,s){"use strict";s("230c")},"56d7":function(t,e,s){"use strict";s.r(e);var n={};s.r(n),s.d(n,"addMessage",(function(){return i})),s.d(n,"loginUser",(function(){return o})),s.d(n,"registerUser",(function(){return c})),s.d(n,"setCompanion",(function(){return l})),s.d(n,"toggleSettings",(function(){return u})),s.d(n,"toggleContact",(function(){return d})),s.d(n,"toggleResend",(function(){return p})),s.d(n,"openProfile",(function(){return h})),s.d(n,"clearChat",(function(){return f})),s.d(n,"setDraft",(function(){return m})),s.d(n,"selectMessage",(function(){return g})),s.d(n,"deleteMessages",(function(){return v})),s.d(n,"resendMessages",(function(){return w}));s("e260"),s("e6cf"),s("cca6"),s("a79d");var a=s("2b0e"),r=s("2f62");s("b0c0"),s("4de4"),s("7db0"),s("caad"),s("2532"),s("a434"),s("d81d");function i(t,e){var s=e.text;t.messages.push({senderId:t.currentId,receiverId:t.companionId,text:s,time:Date.now()})}function o(t,e){var s=e.id;t.currentId=s}function c(t,e){var s=e.name,n=t.users.length;t.users.push({id:n,name:s,avatar:"",status:""}),t.currentId=n+1}function l(t,e){var s=e.id;t.currentId!==s&&(t.companionId=s,t.chats.push({id:s,draft:"",selected:[]}))}function u(t){t.isSettingsOpen=!t.isSettingsOpen}function d(t){t.isContactOpen=!t.isContactOpen}function p(t){t.isResendOpen=!t.isResendOpen}function h(t,e){var s=e.id;t.openedProfile=s}function f(t){t.messages=t.messages.filter((function(e){var s=e.senderId,n=e.receiverId;return!(s===t.currentId&&n===t.companionId)&&!(s===t.companionId&&n===t.currentId)})),t.setCompanion(-1)}function m(t,e){var s=e.text,n=t.chats.find((function(e){return e.id===t.companionId}));n||t.chats.push({draft:"",selected:[]}),n.draft=s}function g(t,e){var s=e.message,n=t.chats.find((function(e){return e.id===t.companionId}));n||t.chats.push({draft:"",selected:[]}),n.selected.includes(s)?t.chats.find((function(e){return e.id===t.companionId})).selected.splice(n.selected.indexOf(s),1):n.selected.push(s)}function v(t){var e=t.chats.find((function(e){return e.id===t.companionId}));t.messages=t.messages.filter((function(t){return!e.selected.includes(t)}))}function w(t,e){var s=e.id,n=t.chats.find((function(e){return e.id===t.companionId})),a={messages:[],time:Date.now(),senderId:t.currentId,receiverId:s};n.selected.map((function(t){return a.messages.push(t)})),t.messages.push(a)}var C=s("0e44");a["a"].use(r["a"]);var b=[{id:0,name:"infret",avatar:"https://images.unsplash.com/photo-1503212556734-c0ca0c49c8b0?ixlib=rb-1.2.1&ixid=MXwxMjA3fDB8MHxzZWFyY2h8MjF8fHNpbGhvdWV0dGV8ZW58MHwyfDB8&auto=format&fit=crop&w=400&q=60",status:"The creator"},{id:1,name:"sophielee",avatar:"https://images.unsplash.com/photo-1581197326868-51cafbd1a169?ixid=MXwxMjA3fDB8MHxzZWFyY2h8MTJ8fHNpbGhvdWV0dGV8ZW58MHx8MHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=600&q=60",status:"Busy nowadays"},{id:2,name:"juliebean",avatar:"https://images.unsplash.com/photo-1559219276-b32ba1bf5bad?ixid=MXwxMjA3fDB8MHxzZWFyY2h8Mjh8fHNpbGhvdWV0dGV8ZW58MHx8MHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=600&q=60",status:"New out there!"},{id:3,name:"roangardener",avatar:"https://images.unsplash.com/photo-1578977826019-5141d8ff5870?ixid=MXwxMjA3fDB8MHxzZWFyY2h8MTh8fHNpbGhvdWV0dGV8ZW58MHx8MHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=600&q=60",status:""},{id:4,name:"bobsmith",avatar:"https://images.unsplash.com/photo-1603239699774-885100e49753?ixid=MXwxMjA3fDB8MHxzZWFyY2h8MTd8fHNpbGhvdWV0dGV8ZW58MHx8MHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=600&q=60",status:"Sleeping"}],x=[{senderId:1,receiverId:0,text:"Hi",time:161643491e4},{senderId:0,receiverId:1,text:"Sup",time:161645e7},{senderId:2,receiverId:0,text:"Hello",time:161643492e4},{senderId:0,receiverId:3,text:"Good morning",time:1616434923e3},{senderId:4,receiverId:0,text:"Hola",time:1616434914e3},{senderId:0,receiverId:1,messages:[{senderId:1,receiverId:0,text:"Hi",time:161643491e4},{senderId:0,receiverId:1,text:"Sup",time:161645e7}],time:1618753690500}],_=new r["a"].Store({state:{currentId:0,companionId:1,openedProfile:-1,isSettingsOpen:!1,isContactOpen:!1,isResendOpen:!1,width:window.innerWidth,searchChats:"",searchMessages:"",users:b,messages:x,chats:[]},mutations:n,plugins:[Object(C["a"])()]}),$=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.$store.state.currentId>=0?s("main",[s("Navbar"),s("Chat"),s("Profile"),s("Settings"),s("ContactDialog"),s("ResendDialog")],1):s("Login")],1)},M=[],I=(s("1276"),s("ac1f"),s("159b"),s("a630"),s("3ca3"),s("6062"),s("d3b7"),s("ddb0"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.$store.state.width<=600&&t.$store.state.companionId<0||t.$store.state.width>600?s("nav",{staticClass:"navbar"},[s("header",{staticClass:"header spacer"},[t.searching?t._e():s("div",{staticClass:"flex"},[s("button",{staticClass:"button user",on:{click:function(e){t.popup=!0}}},[s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",height:"50",viewBox:"0 0 24 24",width:"25"}},[s("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),s("path",{attrs:{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z",fill:"currentColor"}})]),s("h1",[t._v("Messenger")])])]),t.searching?s("div",{staticClass:"flex"},[s("button",{staticClass:"button",on:{click:function(e){t.searching=!1}}},[s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",height:"50",viewBox:"0 0 24 24",width:"25"}},[s("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),s("path",{attrs:{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z",fill:"currentColor"}})])]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.$store.state.searchChats,expression:"$store.state.searchChats"}],staticClass:"input",attrs:{placeholder:"Search chats"},domProps:{value:t.$store.state.searchChats},on:{input:function(e){e.target.composing||t.$set(t.$store.state,"searchChats",e.target.value)}}})]):s("button",{staticClass:"button",on:{click:function(e){t.searching=!0}}},[s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",height:"50",width:"25"}},[s("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),s("path",{attrs:{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z",fill:"currentColor"}})])])]),s("div",{staticClass:"chats"},t._l(t.$parent.getChats(),(function(e){return s("button",{key:e.id,staticClass:"link",on:{click:function(s){return t.$parent.setCompanion(e.id)}}},[s("img",{staticClass:"avatar",attrs:{src:e.avatar,alt:"user's avatar"}}),s("div",{staticClass:"column"},[s("h3",{staticClass:"name"},[t._v(t._s(e.name))]),s("div",{staticClass:"flex spacer"},[s("p",{staticClass:"last"},[t._v(t._s(e.lastMessage))]),s("p",{staticClass:"last"},[t._v(t._s(t.lastTime(e.lastTime)))])])])])})),0),t.popup?s("div",{staticClass:"overlay",on:{click:function(e){t.popup=!1}}},[s("div",{staticClass:"menu menu_left"},[s("button",{staticClass:"button",on:{click:function(e){return t.$parent.openProfile(t.$store.state.currentId)}}},[t._v(" Profile ")]),s("button",{staticClass:"button",on:{click:function(e){return t.$store.commit("toggleSettings")}}},[t._v(" Settings ")]),s("button",{staticClass:"button",on:{click:function(e){return t.$store.commit("toggleContact")}}},[t._v(" Add contact ")]),s("button",{staticClass:"button",on:{click:function(e){return t.$store.commit("loginUser",-1)}}},[t._v(" Logout ")])])]):t._e()]):t._e()}),y=[],H={data:function(){return{searching:!1,popup:!1}},methods:{lastTime:function(t){var e=this.$parent.getDate(t);return e!==this.$parent.getDate(Date.now())?e:this.$parent.getTime(t)}}},z=H,k=(s("16a3"),s("2877")),S=Object(k["a"])(z,I,y,!1,null,null,null),P=S.exports,L=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.$store.state.companionId>=0?s("div",{staticClass:"chat"},[s("header",{staticClass:"header spacer"},[s("div",{staticClass:"flex"},[t.searching?t._e():s("button",{staticClass:"button mobile",on:{click:function(e){return t.$parent.setCompanion(-1)}}},[s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",height:"50",viewBox:"0 0 24 24",width:"25"}},[s("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),s("path",{attrs:{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z",fill:"currentColor"}})])]),t.searching?t._e():s("button",{staticClass:"user",on:{click:function(e){return t.$parent.openProfile(t.$store.state.companionId)}}},[s("img",{staticClass:"avatar",attrs:{src:t.$store.state.users[[t.$store.state.companionId]].avatar,alt:"user's avatar"}}),s("h2",{staticClass:"name"},[t._v(" "+t._s(t.$store.state.users[[t.$store.state.companionId]].name)+" ")])])]),t.searching?s("div",{staticClass:"flex"},[s("button",{staticClass:"button",on:{click:function(e){t.searching=!1}}},[s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",height:"50",viewBox:"0 0 24 24",width:"25"}},[s("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),s("path",{attrs:{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z",fill:"currentColor"}})])]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.$store.state.searchMessages,expression:"$store.state.searchMessages"}],staticClass:"input",attrs:{placeholder:"Search messages"},domProps:{value:t.$store.state.searchMessages},on:{input:function(e){e.target.composing||t.$set(t.$store.state,"searchMessages",e.target.value)}}})]):s("div",{staticClass:"buttons"},[t.selecting&&t.$store.state.chats.find((function(e){return e.id===t.$store.state.companionId})).selected.length>0?s("button",{staticClass:"button",on:{click:function(e){return t.toggleResend()}}},[s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",height:"50",viewBox:"0 0 24 24",width:"25",fill:"currentColor"}},[s("path",{attrs:{d:"M0 0h24v24H0V0z",fill:"none"}}),s("path",{attrs:{d:"M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"}})])]):t._e(),t.selecting&&t.$store.state.chats.find((function(e){return e.id===t.$store.state.companionId})).selected.length>0?s("button",{staticClass:"button",on:{click:function(e){return t.deleteMessages()}}},[s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",height:"50",viewBox:"0 0 24 24",width:"25",fill:"currentColor"}},[s("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),s("path",{attrs:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}})])]):t._e(),s("button",{staticClass:"button",on:{click:function(e){t.searching=!0}}},[s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",height:"50",width:"25"}},[s("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),s("path",{attrs:{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z",fill:"currentColor"}})])]),s("button",{staticClass:"button",on:{click:function(e){t.popup=!0}}},[s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",height:"50",viewBox:"0 0 24 24",width:"25"}},[s("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),s("path",{attrs:{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z",fill:"currentColor"}})])])])]),s("div",{staticClass:"messages"},t._l(t.$parent.getMessages(t.$store.state.companionId),(function(e,n){return s("div",{key:n,staticClass:"message"},["string"!==typeof e&&t.selecting?s("input",{staticClass:"checkbox",class:{checkbox_checked:t.isSelected(e)},attrs:{type:"checkbox"},on:{click:function(s){return t.$store.commit("selectMessage",{message:e})}}}):t._e(),"string"===typeof e||e.messages?t._e():s("div",{class:["bubble",{bubble_current:e.senderId===t.$store.state.currentId}]},[t._v(" "+t._s(e.text)+" "),s("p",{staticClass:"dim time"},[t._v(" "+t._s(t.$parent.getTime(e.time))+" ")])]),"string"!==typeof e&&e.messages?s("div",{class:["bubble bubble_resent",{bubble_current:e.senderId===t.$store.state.currentId}]},[t._l(e.messages,(function(e,n){return s("div",{key:n,staticClass:"message_resent"},[s("div",{staticClass:"flex"},[s("img",{staticClass:"avatar",attrs:{src:t.$store.state.users[e.senderId].avatar,alt:"user's avatar"}}),s("div",{staticClass:"margin"},[s("button",{on:{click:function(s){return t.$parent.setCompanion(e.senderId)}}},[t._v(" "+t._s(t.$store.state.users[e.senderId].name)+" ")]),s("p",{staticClass:"dim time"},[t._v(" "+t._s(t.$parent.getDate(e.time)+" "+t.$parent.getTime(e.time))+" ")])])]),s("p",{staticClass:"margin"},[t._v(t._s(e.text))])])})),s("p",{staticClass:"dim time"},[t._v(" "+t._s(t.$parent.getTime(e.time))+" ")])],2):t._e(),"string"===typeof e?s("div",{staticClass:"date"},[t._v(" "+t._s(e)+" ")]):t._e()])})),0),s("form",{staticClass:"form spacer",on:{submit:function(e){return e.preventDefault(),t.addMessage(t.draft)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.draft,expression:"draft"}],staticClass:"input",attrs:{type:"text",placeholder:"Enter message"},domProps:{value:t.draft},on:{input:function(e){e.target.composing||(t.draft=e.target.value)}}}),s("button",{staticClass:"button",attrs:{type:"submit"}},[s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",height:"50",viewBox:"0 0 24 24",width:"25"}},[s("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),s("path",{attrs:{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z",fill:"currentColor"}})])])]),t.popup?s("div",{staticClass:"overlay",on:{click:function(e){t.popup=!1}}}):t._e(),t.popup?s("div",{staticClass:"menu"},[s("button",{staticClass:"button",on:{click:function(e){return t.clearChat()}}},[t._v("Clear chat")]),s("button",{staticClass:"button",on:{click:function(e){return t.toggleSelect()}}},[t._v("Select messages")])]):t._e()]):s("div",{staticClass:"flex desktop"},[s("h2",[t._v("Select chat")])])},D=[],O={data:function(){return{searching:!1,profile:-1,popup:!1,selecting:!1}},methods:{addMessage:function(t){t&&this.$store.commit("addMessage",{text:t}),this.$store.commit("setDraft",{text:""})},clearChat:function(){this.$store.commit("clearChat"),this.popup=!1},toggleSelect:function(){this.selecting=!this.selecting,this.popup=!1},isSelected:function(t){var e=this.$parent.storeChat();return!(!e||!e.selected.includes(t))},deleteMessages:function(){this.$store.commit("deleteMessages"),this.selecting=!1},toggleResend:function(){this.$store.commit("toggleResend"),this.toggleSelect()}},computed:{draft:{get:function(){var t=this.$parent.storeChat(),e="";if(t){var s=t.draft;s&&(e=s)}return e},set:function(t){this.$store.commit("setDraft",{text:t})}}}},U=O,N=(s("44b9"),Object(k["a"])(U,L,D,!1,null,null,null)),j=N.exports,B=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.isShown?s("div",{staticClass:"overlay",on:{click:function(e){return t.$parent.openProfile(-1)}}},[s("div",{staticClass:"popup profile"},[s("img",{staticClass:"profile_avatar",attrs:{src:t.openedProfileUser.avatar,alt:"user's avatar"}}),s("div",{staticClass:"profile_desc"},[s("div",{staticClass:"flex"},[s("h2",{staticClass:"name"},[t._v(t._s(t.openedProfileUser.name))]),s("p",{staticClass:"dim"},[t._v("id"+t._s(t.openedProfileUser.id))])]),s("p",{staticClass:"name"},[t._v(t._s(t.openedProfileUser.status))])])])]):t._e()},V=[],W={computed:{isShown:function(){return this.$store.state.openedProfile>=0},openedProfileUser:function(){return this.$store.state.users[this.$store.state.openedProfile]}}},E=W,T=(s("b3d7"),Object(k["a"])(E,B,V,!1,null,null,null)),R=T.exports,G=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.$store.state.isSettingsOpen?s("div",{staticClass:"overlay",on:{click:t.toggleSettings}},[s("div",{staticClass:"popup",on:{click:function(t){t.stopPropagation()}}},[s("p",{staticClass:"label"},[t._v("Username:")]),s("form",{staticClass:"form spacer"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.currentUser.name,expression:"currentUser.name"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.currentUser.name},on:{input:function(e){e.target.composing||t.$set(t.currentUser,"name",e.target.value)}}}),s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",height:"50",viewBox:"0 0 24 24",width:"25",fill:"currentColor"}},[s("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),s("path",{attrs:{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}})])]),s("p",{staticClass:"label"},[t._v("Status:")]),s("form",{staticClass:"form spacer"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.currentUser.status,expression:"currentUser.status"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.currentUser.status},on:{input:function(e){e.target.composing||t.$set(t.currentUser,"status",e.target.value)}}}),s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",height:"50",viewBox:"0 0 24 24",width:"25",fill:"currentColor"}},[s("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),s("path",{attrs:{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}})])]),s("p",{staticClass:"label"},[t._v("Avatar:")]),s("form",{staticClass:"form spacer"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.currentUser.avatar,expression:"currentUser.avatar"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.currentUser.avatar},on:{input:function(e){e.target.composing||t.$set(t.currentUser,"avatar",e.target.value)}}}),s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",height:"50",viewBox:"0 0 24 24",width:"25",fill:"currentColor"}},[s("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),s("path",{attrs:{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}})])])])]):t._e()},A=[],Z={methods:{toggleSettings:function(){this.$store.commit("toggleSettings")}},computed:{currentUser:function(){return this.$store.state.users[this.$store.state.currentId]}}},F=Z,Y=(s("d382"),Object(k["a"])(F,G,A,!1,null,null,null)),q=Y.exports,X=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.$store.state.isContactOpen?s("div",{staticClass:"overlay",on:{click:function(e){return t.$store.commit("toggleContact")}}},[s("div",{staticClass:"popup",on:{click:function(t){t.stopPropagation()}}},[s("h1",[t._v("Add new contact by id")]),s("form",{staticClass:"form spacer",on:{submit:function(e){return e.preventDefault(),t.addContact(t.value)}}},[s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.value,expression:"value",modifiers:{number:!0}}],staticClass:"input",attrs:{type:"number",placeholder:"Enter contact id"},domProps:{value:t.value},on:{input:function(e){e.target.composing||(t.value=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),s("button",{staticClass:"button",attrs:{type:"submit"}},[s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",height:"50",viewBox:"0 0 24 24",width:"25"}},[s("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),s("path",{attrs:{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z",fill:"currentColor"}})])])])])]):t._e()},J=[],K={data:function(){return{value:null}},methods:{addContact:function(t){this.$parent.setCompanion(t),this.$store.commit("toggleContact")}}},Q=K,tt=Object(k["a"])(Q,X,J,!1,null,null,null),et=tt.exports,st=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.$store.state.isResendOpen?s("div",{staticClass:"overlay",on:{click:function(e){return t.$store.commit("toggleResend")}}},[s("div",{staticClass:"popup",on:{click:function(t){t.stopPropagation()}}},[s("h1",[t._v("Select who to resend")]),t._l(t.$parent.getChats(),(function(e){return s("button",{key:e.id,staticClass:"user",on:{click:function(s){return t.resendMessage(e.id)}}},[s("img",{staticClass:"avatar",attrs:{src:e.avatar,alt:"user's avatar"}}),s("div",{staticClass:"link"},[s("h3",{staticClass:"name"},[t._v(t._s(e.name))])])])}))],2)]):t._e()},nt=[],at={methods:{resendMessage:function(t){this.$store.commit("resendMessages",{id:t}),this.$parent.setCompanion(t),this.$store.commit("toggleResend")}}},rt=at,it=Object(k["a"])(rt,st,nt,!1,null,null,null),ot=it.exports,ct=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login"},[s("h2",[t._v("Login")]),s("form",{staticClass:"login_field",on:{submit:function(e){return e.preventDefault(),t.loginUser()}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.loginName,expression:"loginName"}],staticClass:"input",attrs:{type:"text",placeholder:"Enter username"},domProps:{value:t.loginName},on:{input:function(e){e.target.composing||(t.loginName=e.target.value)}}}),s("button",{staticClass:"button",attrs:{type:"submit"}},[s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg","enable-background":"new 0 0 24 24",height:"50",viewBox:"0 0 24 24",width:"25",fill:"currentColor"}},[s("g",[s("rect",{attrs:{fill:"none",height:"24",width:"24"}})]),s("g",[s("path",{attrs:{d:"M11,7L9.6,8.4l2.6,2.6H2v2h10.2l-2.6,2.6L11,17l5-5L11,7z M20,19h-8v2h8c1.1,0,2-0.9,2-2V5c0-1.1-0.9-2-2-2h-8v2h8V19z"}})])])])]),s("h2",[t._v("Register")]),s("form",{staticClass:"login_field",on:{submit:function(e){return e.preventDefault(),t.registerUser()}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.registerName,expression:"registerName"}],staticClass:"input",attrs:{type:"text",placeholder:"Enter username"},domProps:{value:t.registerName},on:{input:function(e){e.target.composing||(t.registerName=e.target.value)}}}),s("button",{staticClass:"button",attrs:{type:"submit"}},[s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg","enable-background":"new 0 0 24 24",height:"50",viewBox:"0 0 24 24",width:"25",fill:"currentColor"}},[s("g",[s("rect",{attrs:{fill:"none",height:"24",width:"24"}})]),s("g",[s("path",{attrs:{d:"M11,7L9.6,8.4l2.6,2.6H2v2h10.2l-2.6,2.6L11,17l5-5L11,7z M20,19h-8v2h8c1.1,0,2-0.9,2-2V5c0-1.1-0.9-2-2-2h-8v2h8V19z"}})])])])]),t._m(0),t._m(1)])},lt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v(" This website is not real. Users are fictional, photos are copyright-free. All changes aren't sent anywhere and exist only in your browser. You can log in without password with any existing username (try "),s("b",[t._v("infret")]),t._v(") or register a new one. ")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a",{staticClass:"login_link",attrs:{href:"https://pechkin.dev"}},[s("i",[t._v("by infret")])])}],ut={data:function(){return{loginName:"",registerName:""}},methods:{loginUser:function(){var t=this.loginName.toLowerCase(),e=this.$store.state.users.find((function(e){return e.name===t}));e?this.$store.commit("loginUser",{id:e.id}):alert("Wrong username")},registerUser:function(){var t=this.registerName.toLowerCase(),e=this.$store.state.users.find((function(e){return e.name===t}));e?alert("User already exists"):this.$store.commit("registerUser",{name:t})}}},dt=ut,pt=(s("5338"),Object(k["a"])(dt,ct,lt,!1,null,null,null)),ht=pt.exports,ft={name:"App",components:{Navbar:P,Chat:j,Profile:R,Settings:q,ContactDialog:et,Login:ht,ResendDialog:ot},created:function(){this.storeChat()},methods:{setCompanion:function(t){this.$store.commit("setCompanion",{id:t})},openProfile:function(t){this.$store.commit("openProfile",{id:t})},getTime:function(t){var e=new Date(t);return e.toLocaleString("en-GB",{hour:"numeric",minute:"2-digit"}).split(" ").pop()},getDate:function(t){var e=new Date(t);return e.toLocaleString("en-GB",{month:"short",day:"numeric"})},getMessages:function(t){var e=this,s=[],n=this.$store.state,a=n.currentId,r=n.messages;if(r.forEach((function(e){e.senderId===a&&e.receiverId===t&&s.push(e)})),r.forEach((function(e){e.receiverId===a&&e.senderId===t&&s.push(e)})),s.length>0){this.$store.state.searchMessages&&(s=s.filter((function(t){return t.text.toLowerCase().includes(e.$store.state.searchMessages.toLowerCase())}))),s.sort((function(t,e){return t.time-e.time}));for(var i=this.getDate(s[0].time),o=[i],c=0;c<s.length;c++)this.getDate(s[c].time)===i?o.push(s[c]):(i=this.getDate(s[c].time),o.push(i,s[c]));return o}},storeChat:function(){var t=this,e=this.$store.state.chats.find((function(e){return e.id===t.$store.state.companionId}));e||this.$store.state.chats.push({id:this.$store.companionId,draft:"",selected:[]})},getChats:function(){var t=this,e=[],s=this.$store.state,n=s.messages,a=s.users,r=s.currentId,i=s.searchChats;return n.forEach((function(t){var s=t.receiverId,n=t.senderId;s===r&&e.push(a[n]),n===r&&e.push(a[s])})),i&&(e=e.filter((function(t){return t.name.toLowerCase().includes(i.toLowerCase())}))),e.map((function(e){var s=t.getMessages(e.id);if(s.length>0){var n=s[s.length-1];e.lastMessage=n.text||"[Resent message]",e.lastTime=n.time}})),Array.from(new Set(e)).sort((function(t,e){return e.lastTime-t.lastTime}))}}},mt=ft,gt=(s("c796"),Object(k["a"])(mt,$,M,!1,null,null,null)),vt=gt.exports;a["a"].config.productionTip=!1,new a["a"]({store:_,created:function(){window.addEventListener("resize",this.setWidth)},destroyed:function(){window.removeEventListener("resize",this.setWidth)},methods:{setWidth:function(){this.$store.state.width=window.innerWidth}},render:function(t){return t(vt)}}).$mount("#app")},b3d7:function(t,e,s){"use strict";s("16b0")},c08c:function(t,e,s){},c796:function(t,e,s){"use strict";s("07a7")},cb20:function(t,e,s){},cd8c:function(t,e,s){},d382:function(t,e,s){"use strict";s("c08c")}});
//# sourceMappingURL=app.9efb3ebf.js.map